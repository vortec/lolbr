<html>
<head>
    <script src="./js/jquery-1.4.2.min.js"></script>
    <script src="./js/client_handlers.js"></script>

    <script src="./js/ui.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = false;

        function addToLog(text) {
            $('#log').append(text + '<br/>');
            scrollToChatBottom();
        }

        function submit() {
            var text = $('#input').val();
            socket.emit('MESSAGE', {'text': text});
            clearInputField();
        }

        function connect() {
            var host = window.location.hostname;
            socket = io.connect('http://' + host);

            for (var event in handlers) {
                socket.on(event, handlers[event]);
            }

            var room = 'foobar';
            var nickname = 'user' + (parseInt(Math.random()*10) * parseInt(Math.random()*10))
            nickname = prompt('What\'s your name?', name);
            clearInputField();
            
            socket.emit('CONNECT', {'room': room, 'nickname': nickname});
        }

        $(window).ready(function() {
            adjustComponentDimensions();
            assignListeners();
            connect();
        });
    </script>
</head>
<body>

    <div id="log" style="overflow: auto">
    </div>

    <div id="user_input">
        <input id="input" type="text" />
    </div>


</body>
</html>
