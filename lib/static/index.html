<html>
<head>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/jquery-1.4.2.min.js"></script>
    <script src="/js/client_handlers.js"></script>
    <script src="/js/ui.js"></script>
    <script>
        var socket = false;
        var room = window.location.pathname.split('/')[1];
        var nickname = 'user' + (parseInt(Math.random()*10) * parseInt(Math.random()*10))
        nickname = prompt('What\'s your name?', name);

        function encode_utf8(text) {
            return unescape(encodeURIComponent(text));
        }

        function decode_utf8(text) {
            return decodeURIComponent(escape(text));
        }


        function addToLog(text) {
            $('#log').append(text + '<br/>');
            scrollToChatBottom();
        }

        function submit() {
            var text = $('#input').val();
            text = encode_utf8(text);
            socket.emit('MESSAGE', {'text': text});
            clearInputField();
        }

        function connect() {
            var host = window.location.hostname;
            socket = io.connect('http://' + host);
            for (var event in handlers) {
                socket.on(event, handlers[event]);
            }
        }

        $(window).ready(function() {
            adjustComponentDimensions();
            assignListeners();
            connect();
        });
    </script>
</head>
<body>

    <div id="log" style="overflow: auto">
    </div>

    <div id="user_input">
        <input id="input" type="text" />
    </div>


</body>
</html>
